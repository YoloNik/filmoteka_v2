{"version":3,"sources":["js/fetchApi.js","js/markup-movie-card.js","js/markup-modal.js","index.js"],"names":["apiService","fetchAPI","constructor","searchQuery","page","genres","movieId","getTrendMovies","URLQuery","BASE_URL","API_KEY","encodeURIComponent","fetch","then","response","status","Error","json","data","catch","error","console","log","query","newQuery","getGenres","ok","Promise","reject","normaGenres","reduce","acc","id","name","genresValue","getSingleMovie","movieGallery","document","querySelector","errorText","fetchMoviesWhisGenres","style","visibility","movieData","results","map","movieEl","genre_ids","generEl","join","total_results","innerHTML","createCards","el","idx","poster_path","movieCard","createElement","title","release_date","substr","modalWin","fetcMovieForModal","createModal","movieModal","backdrop_path","original_title","vote_average","vote_count","popularity","overview","getElementById","homeBtn","myLibrary","singleMovie","modal","onSearchBtn","e","target","closest","preventDefault","currentTarget","elements","value","openModal","dataset","display","closeModal","addEventListener"],"mappings":"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","file":"src.5192c887.js","sourceRoot":"../src","sourcesContent":["class fetchAPI {\n  BASE_URL = 'https://api.themoviedb.org/3';\n  API_KEY = `87f9885ae1efa5e26738121aab64796c`;\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.genres = {};\n    this.movieId = '';\n  }\n\n  async getTrendMovies() {\n    let URLQuery = this.searchQuery\n      ? `${this.BASE_URL}/search/movie?api_key=${\n          this.API_KEY\n        }&language=en-US&page=${\n          this.page\n        }&include_adult=false&query=${encodeURIComponent(this.searchQuery)}`\n      : `${this.BASE_URL}/trending/movie/week?api_key=${this.API_KEY}&page=${this.page}`;\n\n    return await fetch(URLQuery)\n      .then(response => {\n        if (response.status === 404) throw new Error();\n\n        return response.json();\n      })\n      .then(data => {\n        return data;\n      })\n      .catch(error => console.log(error));\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  async getGenres() {\n    return await fetch(\n      `${this.BASE_URL}/genre/movie/list?api_key=${this.API_KEY}`\n    )\n      .then(data => {\n        if (data.ok) {\n          return data.json();\n        }\n        return Promise.reject(new Error('Error'));\n      })\n      .then(data => {\n        const normaGenres = data.genres.reduce((acc, { id, name }) => {\n          return { ...acc, [id]: name };\n        }, {});\n        this.genres = normaGenres;\n        return normaGenres;\n      })\n      .catch(error => console.log(error));\n  }\n  get genresValue() {\n    return this.genres;\n  }\n  async getSingleMovie() {\n    return await fetch(\n      `${this.BASE_URL}/movie/${this.movieId}?api_key=${this.API_KEY}`\n    )\n      .then(response => {\n        if (response.status === 404) throw new Error();\n\n        return response.json();\n      })\n      .then(data => {\n        return data;\n      })\n      .catch(error => console.log(error));\n  }\n}\n\nconst apiService = new fetchAPI();\nexport default apiService;\n","import apiService from './fetchApi';\n\nconst movieGallery = document.querySelector(`.gallery`);\nconst errorText = document.querySelector(`.search__error`);\n\nexport default function fetchMoviesWhisGenres() {\n  errorText.style.visibility = `hidden`;\n  apiService.getGenres();\n  apiService.getTrendMovies().then(movieData => {\n    const genres = apiService.genresValue;\n    const normaGenres = movieData.results.map(movieEl => {\n      return movieEl.genre_ids\n        .map(generEl => {\n          if (genres[generEl]) return genres[generEl];\n        })\n        .join(', ');\n    });\n    if (movieData.total_results === 0) {\n      movieGallery.innerHTML = '';\n      errorText.style.visibility = `visible`;\n    } else {\n      movieGallery.innerHTML = createCards(movieData, normaGenres);\n    }\n  });\n}\n\nfunction createCards(movieData, normaGenres) {\n  return movieData.results\n    .map((el, idx) => {\n      if (el.poster_path !== null) {\n        let movieCard = document.createElement(`div`);\n        return (movieCard.innerHTML = `<div class=\"movie-card\">\n<img src=\"https://image.tmdb.org/t/p/w500${el.poster_path}\" data-id=\"${\n          el.id\n        }\" alt=\"There should be a poster ðŸ˜®\">\n  <div class=\"movie-card__title\">\n\t\t<span>${el.title}</span>\n\t<div class=\"movie-card__info-item\">\n\t\t<span>${normaGenres[idx]} | ${el.release_date.substr(0, 4)}</span>\n\t</div>\n  </div>\n</div>`);\n      }\n    })\n    .join('');\n}\n","import apiService from './fetchApi';\n//import fetchNormaMovie from './markup-movie-card';\n\nconst modalWin = document.querySelector('.output-js');\n\nexport default function fetcMovieForModal() {\n  apiService.getSingleMovie().then(movieData => {\n    const normaGenres = movieData.genres\n      .map(genres => genres[`name`])\n      .join(', ');\n    modalWin.innerHTML = createModal(movieData, normaGenres);\n  });\n}\n\nfunction createModal(movieData, normaGenres) {\n  let movieModal = document.createElement(`div`);\n  return (movieModal.innerHTML = `<img class=\"modal-content__img\"\n\t\t\tsrc=\"https://image.tmdb.org/t/p/w500${movieData.backdrop_path}\" alt=\"${movieData.original_title}\" />\n    <div class=\"wrap\">\n      <h2 class=\"modal-content__title\">${movieData.original_title}</h2>\n      <div class=\"info-wrap modal-content__info-wrap\">\n        <ul class=\"category-list\">\n          <li class=\"category-list__item\">Vote / Votes</li>\n          <li class=\"category-list__item\">Popularity</li>\n          <li class=\"category-list__item\">Original Title</li>\n          <li class=\"category-list__item\">Genre</li>\n        </ul>\n        <ul class=\"category-value-list modal-content__category-value-list\">\n          <li class=\"category-value-list__item\">\n\t\t\t\t\t\t<p class=\"category-value-list__item_bg-color\">${movieData.vote_average} </p>\n\t\t\t\t\t\t<p class=\"category-value-list__item_font-color\"> / ${movieData.vote_count} </p> </li>\n          <li class=\"category-value-list__item\">${movieData.popularity}</li>\n          <li class=\"category-value-list__item\">${movieData.title}</li>\n          <li class=\"category-value-list__item\">${normaGenres}</li>\n        </ul>\n      </div>\n\t\t\t   <h3 class=\"modal-content__subtitle\">About</h3>\n      <p class=\"modal-content__description\">${movieData.overview}</p>\n      <div class=\"btn-wrap content__btn-wrap\">\n          <button class=\"btn-wrap__btn active\" data-action=\"watched\">add to Watched</button>\n          <button class=\"btn-wrap__btn \" data-action=\"queue\">add to queue</button>\n        </div>\n    `);\n}\n","import apiService from './js/fetchApi';\nimport fetchMoviesWhisGenres from './js/markup-movie-card';\nimport fetcMovieForModal from './js/markup-modal';\n\nconst searchQuery = document.getElementById(`search__form`);\nconst homeBtn = document.querySelector('.header__home-btn');\nconst myLibrary = document.querySelector('.header__library-btn');\nconst movieGallery = document.getElementById(`gallery`);\nconst singleMovie = document.querySelector('.movie-card');\nconst modal = document.querySelector('.backdrop-modal');\n\n//console.log(movieGallery);\n\nmodal.addEventListener('click', closeModal);\nmovieGallery.addEventListener('click', openModal);\nsearchQuery.addEventListener(`click`, onSearchBtn);\n\nfetchMoviesWhisGenres();\n\nfunction onSearchBtn(e) {\n  if (e.target.closest(`button`)) {\n    e.preventDefault();\n    apiService.query = e.currentTarget.elements[0].value;\n    fetchMoviesWhisGenres();\n  }\n}\n\nfunction openModal(e) {\n  if (e.target.closest('.movie-card')) {\n    let movieId = e.target.dataset.id;\n    apiService.movieId = movieId;\n    fetcMovieForModal();\n\n    modal.style.display = `block`;\n  }\n}\nfunction closeModal(e) {\n  if (e.target.closest('.modal-content__close-btn')) {\n    modal.style.display = `none`;\n  }\n}\n"]}